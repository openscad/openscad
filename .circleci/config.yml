version: 2
jobs:
  openscad-macos:
    macos:
      xcode: "10.0.0"
    steps:
      - checkout
      - run:
          name: Build OpenSCAD MacOS
          no_output_timeout: 18000
          command: |
              ls -la scripts
              source setenv_mac.sh
              ./scripts/macosx-build-dependencies.sh double_conversion
      - store_artifacts:
          path: /tmp/out
          destination: 64-bit

workflows:
  version: 2
  build:
    jobs:
      - openscad-macos:
          context: secret-context
          filters:
              branches:
                  ignore:
                      - coverity_scan
                      - /^(?i:continuous)$/
